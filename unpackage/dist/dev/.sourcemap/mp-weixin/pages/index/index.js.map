{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../../Downloads/HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<section class=\"control_container\" :style=\"containerStyle\" @touchmove.prevent>\r\n\t\t<!-- 头部内容 -->\r\n\t\t<view class=\"control_title\" :style=\"navbarStyle\">\r\n\t\t\t<view class=\"header\">\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t雅迪王\r\n\t\t\t\t\t<text style=\"font-size: 16px;\">京AYU76G</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"icons-container\">\r\n\t\t\t\t\t<image src=\"/static/set_up.png\" class=\"icon\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"subtitle\">\r\n\t\t\t\t<text>已关锁</text>\r\n\t\t\t\t<text class=\"location-divider\">丨</text>\r\n\t\t\t\t<text>北京市丰台区海鹰大厦</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 地图内容 -->\r\n\t\t<view class=\"control_car_picture\">\r\n\t\t\t<map id=\"myMap\" :scale=\"20\" class=\"map\" :latitude=\"latitude\" :longitude=\"longitude\" :markers=\"markers\"\r\n\t\t\t\tshow-location @regionchange=\"onRegionChange\">\r\n\t\t\t\t<cover-view class=\"map_control\">\r\n\t\t\t\t\t<cover-image\r\n\t\t\t\t\t\t:src=\"connectionState == '已连接' ? '/static/bluetooth_select.png' : '/static/bluetooth.png'\"\r\n\t\t\t\t\t\tclass=\"map_image\"></cover-image>\r\n\t\t\t\t</cover-view>\r\n\t\t\t</map>\r\n\t\t</view>\r\n\t\t<!-- 操控区域内容 -->\r\n\t\t<view class=\"control_quick-entry\">\r\n\t\t\t<!-- swiper 组件 -->\r\n\t\t\t<swiper class=\"entry-swiper\" :indicator-dots=\"false\" indicator-color=\"rgba(0, 0, 0, .3)\"\r\n\t\t\t\tindicator-active-color=\"#ffffff\" :autoplay=\"false\" :interval=\"3000\" :duration=\"500\" :circular=\"false\"\r\n\t\t\t\t:vertical=\"false\" @change=\"onSwiperChange\">\r\n\t\t\t\t<!-- 动态生成 swiper-item -->\r\n\t\t\t\t<swiper-item v-for=\"(page, pageIndex) in pages\" :key=\"pageIndex\">\r\n\t\t\t\t\t<view class=\"entry-page\">\r\n\t\t\t\t\t\t<view v-for=\"(item, index) in page\" :key=\"index\" class=\"entry-item\"\r\n\t\t\t\t\t\t\t@tap=\"parseEventDynamicCode($event, item.evt)\">\r\n\t\t\t\t\t\t\t<image :src=\"item.icon\" class=\"entry-icon\" mode=\"aspectFit\" />\r\n\t\t\t\t\t\t\t<text class=\"entry-text\">{{ item.text }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<view class=\"custom-indicator\">{{ current + 1 }} / {{ pages.length }}</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 信息中心 -->\r\n\t\t<view class=\"control_info-root\">\r\n\t\t\t<!-- 左侧卡片 -->\r\n\t\t\t<view class=\"control_info-left-card\">\r\n\t\t\t\t<!-- 左上角 -->\r\n\t\t\t\t<view class=\"control_info-corner control_info-top-left\">\r\n\t\t\t\t\t<text class=\"control_info-date\">29天前</text>\r\n\t\t\t\t\t<text class=\"control_info-label\">上次充电</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 右上角 -->\r\n\t\t\t\t<view class=\"control_info-corner control_info-top-right\">\r\n\t\t\t\t\t<text class=\"control_info-battery-value\">\r\n\t\t\t\t\t\t72<text class=\"control_info-battery-unit\">%</text>\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 左下角 -->\r\n\t\t\t\t<view class=\"control_info-corner control_info-bottom-left\">\r\n\t\t\t\t\t<text class=\"control_info-label\">21天</text>\r\n\t\t\t\t\t<text class=\"control_info-date\">已用天数</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 右下角 -->\r\n\t\t\t\t<view class=\"control_info-corner control_info-bottom-right\">\r\n\t\t\t\t\t<text class=\"control_info-label\">10天</text>\r\n\t\t\t\t\t<text class=\"control_info-date\">可用天数</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 右侧两个区域 -->\r\n\t\t\t<view class=\"control_info-right-container\">\r\n\t\t\t\t<view class=\"control_info-right-item\">\r\n\t\t\t\t\t<image src=\"/static/gy.png\" class=\"control_info-icon\"></image>\r\n\t\t\t\t\t<view class=\"control_car_text\">\r\n\t\t\t\t\t\t<text class=\"control_info-title\">感应模式</text>\r\n\t\t\t\t\t\t<text class=\"control_info-status\">未开启</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"control_info-right-item\">\r\n\t\t\t\t\t<image src=\"/static/clzx.png\" class=\"control_info-icon\"></image>\r\n\t\t\t\t\t<text class=\"control_info-title\">车辆中心</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 解释权区域 -->\r\n\t\t<view class=\"control_footer\" v-if=\"this.screenInfo.screenHeight>600\">\r\n\t\t\t<view class=\"footer-content\">\r\n\t\t\t\t<view class=\"footer-item\">\r\n\t\t\t\t\t<text class=\"footer-title\">连接状态：</text>\r\n\t\t\t\t\t<text class=\"footer-info\">当地图上蓝牙图标呈蓝色高亮时，表示车辆已就绪，可进行操控</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footer-item\">\r\n\t\t\t\t\t<text class=\"footer-title\">位置信息：</text>\r\n\t\t\t\t\t<text class=\"footer-info\">当前显示为车辆上一次蓝牙连接时的最后记录位置</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footer-item\">\r\n\t\t\t\t\t<text class=\"footer-title\">操控区域：</text>\r\n\t\t\t\t\t<text class=\"footer-info\">基础控制功能适用于全部车型，高级功能仅支持高配版及商务车型</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footer-item\">\r\n\t\t\t\t\t<text class=\"footer-title\">电量信息：</text>\r\n\t\t\t\t\t<text class=\"footer-info\">蓝牙连接后同步获取，可用天数预估基于本次充电后的实际用车习惯动态计算</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"footer-item\">\r\n\t\t\t\t\t<text class=\"footer-title\">感应模式：</text>\r\n\t\t\t\t\t<text class=\"footer-info\">需在设置中完成蓝牙配对后方可启用（仅限车主账户操作）</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 更多内容 -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</section>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tinfo_screen\r\n\t} from '@/utils/scheme/screen.js'\r\n\timport bleKeyManager from '@/utils/BleKeyFun-utils-single.js'\r\n\timport {\r\n\t\tu_getCarBluetoothKeyByCode,\r\n\t\tu_paivatecarList,\r\n\t\tu_paivatesendInfo,\r\n\t\tu_paivateuploadLog\r\n\t} from '@/api'\r\n\r\n\t// 操作区指令封装常量\r\n\tconst VehicleCommand = {\r\n\t\tUNLOCK: 3, //开锁\r\n\t\tLOCK: 4, //关锁\r\n\t\tOPEN_TRUNK: 5, //尾箱\r\n\t\tFIND_CAR: 6, //寻车\r\n\t\tCONTROL_WINDOW: 7, //操作车窗\r\n\t};\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tlatitude: 39.90469,\r\n\t\t\t\tlongitude: 116.40717,\r\n\t\t\t\tmarkers: [{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\tlatitude: 39.90469,\r\n\t\t\t\t\tlongitude: 116.40717,\r\n\t\t\t\t\ttitle: '天安门',\r\n\t\t\t\t\tcallout: {\r\n\t\t\t\t\t\tcontent: '这里是天安门',\r\n\t\t\t\t\t\tdisplay: 'ALWAYS'\r\n\t\t\t\t\t}\r\n\t\t\t\t}],\r\n\t\t\t\tentries: [{\r\n\t\t\t\t\t\ttext: '开锁',\r\n\t\t\t\t\t\ticon: '/static/lock.png',\r\n\t\t\t\t\t\tevt: 'handleUnlock'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '关锁',\r\n\t\t\t\t\t\ticon: '/static/unlock.png',\r\n\t\t\t\t\t\tevt: 'handleLock'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '寻车',\r\n\t\t\t\t\t\ticon: '/static/xunche.png',\r\n\t\t\t\t\t\tevt: 'handleFindCar'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '尾箱',\r\n\t\t\t\t\t\ticon: '/static/weixiang.png',\r\n\t\t\t\t\t\tevt: 'handleOpenTrunk'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '升窗',\r\n\t\t\t\t\t\ticon: '/static/sc.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '降窗',\r\n\t\t\t\t\t\ticon: '/static/jc.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '左中门',\r\n\t\t\t\t\t\ticon: '/static/zm.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '右中门',\r\n\t\t\t\t\t\ticon: '/static/ym.png'\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t\titemsPerPage: 4,\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\tscreenInfo: {},\r\n\t\t\t\t// 蓝牙连接状态：未连接 / 已连接\r\n\t\t\t\tconnectionState: '未连接',\r\n\t\t\t\t// 当前连接ID\r\n\t\t\t\tconnectionID: '',\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tasync onLoad() {\r\n\t\t\tthis.isLoading = true;\r\n\t\t\tuni.hideTabBar({\r\n\t\t\t\tanimation: true\r\n\t\t\t});\r\n\r\n\t\t\ttry {\r\n\t\t\t\tawait Promise.allSettled([\r\n\t\t\t\t\tthis.initialScreenInfo(),\r\n\t\t\t\t]);\r\n\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('初始化失败:', error);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.isLoading = false;\r\n\t\t\t}\r\n\t\t\tthis.getLocation();\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\t// 获取设备屏幕信息\r\n\t\t\tthis.initialScreenInfo()\r\n\t\t\t// 开始蓝牙连接流程\r\n\t\t\tthis.handleStart();\r\n\t\t\t// 启动连接状态轮询\r\n\t\t\tthis.startConnectionStatusPolling();\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tpages() {\r\n\t\t\t\tconst pages = [];\r\n\t\t\t\tconst total = this.entries.length;\r\n\t\t\t\tfor (let i = 0; i < total; i += this.itemsPerPage) {\r\n\t\t\t\t\tpages.push(this.entries.slice(i, i + this.itemsPerPage));\r\n\t\t\t\t}\r\n\t\t\t\treturn pages;\r\n\t\t\t},\r\n\t\t\tcontainerStyle() {\r\n\t\t\t\tconsole.log(this.screenInfo)\r\n\t\t\t\treturn {\r\n\t\t\t\t\theight: `${this.screenInfo.screenHeight || 667}px`\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 导航栏样式\r\n\t\t\tnavbarStyle() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmarginTop: `${this.screenInfo.statusBarHeight}px`,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 获取屏幕信息\r\n\t\t\tasync initialScreenInfo() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.screenInfo = await info_screen();\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '设备信息获取失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 启动连接状态轮询\r\n\t\t\tstartConnectionStatusPolling() {\r\n\t\t\t\tif (this.pageInterval) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.pageInterval = setInterval(() => {\r\n\t\t\t\t\tconst isConnected = bleKeyManager.getBLEConnectionState();\r\n\t\t\t\t\tconst connectionID = isConnected ? bleKeyManager.getBLEConnectionID() : '';\r\n\t\t\t\t\tconst displayText = isConnected ? connectionID : '未连接';\r\n\t\t\t\t\tthis.connectionState = isConnected ? '已连接' : '未连接'\r\n\t\t\t\t\tthis.connectionID = connectionID\r\n\t\t\t\t}, 200);\r\n\t\t\t},\r\n\t\t\t// 连接蓝牙\r\n\t\t\thandleStart() {\r\n\t\t\t\tconst mockBluetoothData = {\r\n\t\t\t\t\tsn: '19585080049',\r\n\t\t\t\t\tbluetoothKey: \"333917323272\",\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (mockBluetoothData) {\r\n\t\t\t\t\tthis.deviceIDC = mockBluetoothData.sn;\r\n\t\t\t\t\tif (mockBluetoothData.bluetoothKey) {\r\n\t\t\t\t\t\tconst numStr = mockBluetoothData.bluetoothKey.toString();\r\n\t\t\t\t\t\tconst bytes = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < numStr.length; i += 2) {\r\n\t\t\t\t\t\t\tconst byteStr = numStr.substring(i, i + 2);\r\n\t\t\t\t\t\t\tbytes.push(parseInt(byteStr, 16));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.orgKey = bytes;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.orgKeyOld = mockBluetoothData.bluetoothKey;\r\n\t\t\t\t\tthis.bluetoothData = mockBluetoothData;\r\n\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tbleKeyManager.connectBLE(\r\n\t\t\t\t\t\t\tthis.deviceIDC,\r\n\t\t\t\t\t\t\t(state) => {\r\n\t\t\t\t\t\t\t\tthis.bluetoothStateMonitor(state);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t(type, arrayData, hexData, hexTextData) => {\r\n\t\t\t\t\t\t\t\tthis.bluetoothDataMonitor(type, arrayData, hexData, hexTextData);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 蓝牙状态执行对应操作\r\n\t\t\tbluetoothStateMonitor(state) {\r\n\t\t\t\t// 内部辅助函数：显示错误Toast\r\n\t\t\t\tconst showErrorToast = (message) => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: message,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 3000,\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// 内部辅助函数：显示成功Toast\r\n\t\t\t\tconst showSuccessToast = (message = '操作成功') => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: message,\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst stateHandlers = {\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_PRE_EXECUTE]: () => {\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_ERROR]: () => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_ADAPTER_UNAVAILABLE]: () => {\r\n\t\t\t\t\t\tshowErrorToast('请打开蓝牙');\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_NOT_FOUND]: () => {\r\n\t\t\t\t\t\tshowErrorToast('没有发现设备');\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_CONNECT_FAILED]: () => {\r\n\t\t\t\t\t\tshowErrorToast('蓝牙连接失败');\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_UNSUPPORTED]: () => {\r\n\t\t\t\t\t\tshowErrorToast('您的手机不支持低功耗蓝牙');\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_SEND_FAILED]: () => {\r\n\t\t\t\t\t\tshowErrorToast('数据发送失败');\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_NO_RESPONSE]: () => {\r\n\t\t\t\t\t\tshowErrorToast('设备超时无响应');\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[bleKeyManager.DEFAULT_BLUETOOTH_STATE.BLUETOOTH_CONNECT_SUCESS]: () => {\r\n\t\t\t\t\t\tshowSuccessToast('连接成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst handler = stateHandlers[state];\r\n\t\t\t\tif (handler) {\r\n\t\t\t\t\thandler();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.warn('未知的蓝牙状态:', state);\r\n\t\t\t\t\t// 对于未知状态，也隐藏loading避免卡住界面\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 解析数据+验证合法性\r\n\t\t\tbluetoothDataMonitor: function(type, arrayData, hexData, hexTextData) {\r\n\t\t\t\tconst dataStr = hexTextData || '';\r\n\t\t\t\tif (type === 0) {\r\n\t\t\t\t\tthis.btnCmdSend(16, arrayData);\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.PackAndSend(16, 8, [0, 0, 0, 0, 0, 0, 0, 0]);\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t}\r\n\t\t\t\tthis.parseData(this.trimHexData(dataStr));\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 点击操作手动区事件\r\n\t\t\tparseEventDynamicCode($, evt) {\r\n\r\n\t\t\t\tthis.handleEvent(evt);\r\n\t\t\t},\r\n\t\t\t// 手动操作区执行事件\r\n\t\t\thandleEvent(eventType) {\r\n\t\t\t\tconst actions = {\r\n\t\t\t\t\thandleUnlock: () => {\r\n\t\t\t\t\t\tthis.sendVehicleCommandFun(VehicleCommand.UNLOCK, '');\r\n\t\t\t\t\t},\r\n\t\t\t\t\thandleLock: () => {\r\n\t\t\t\t\t\tthis.sendVehicleCommandFun(VehicleCommand.LOCK, '');\r\n\t\t\t\t\t},\r\n\t\t\t\t\thandleOpenTrunk: () => {\r\n\t\t\t\t\t\tthis.sendVehicleCommandFun(VehicleCommand.OPEN_TRUNK, '');\r\n\t\t\t\t\t},\r\n\t\t\t\t\thandleFindCar: () => {\r\n\t\t\t\t\t\tthis.sendVehicleCommandFun(VehicleCommand.FIND_CAR, '');\r\n\t\t\t\t\t},\r\n\t\t\t\t\thandleRaiseTheWindow: () => {\r\n\t\t\t\t\t\tthis.sendVehicleCommandFun(VehicleCommand.CONTROL_WINDOW, WindowAction.RAISE);\r\n\t\t\t\t\t},\r\n\t\t\t\t\thandleLowerTheWindow: () => {\r\n\t\t\t\t\t\tthis.sendVehicleCommandFun(VehicleCommand.CONTROL_WINDOW, WindowAction.LOWER);\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\r\n\t\t\t\tconst action = actions[eventType];\r\n\t\t\t\tif (typeof action === 'function') {\r\n\t\t\t\t\taction();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 指令公共方法\r\n\t\t\tsendVehicleCommandFun: function(commandCode, code) {\r\n\r\n\t\t\t\tif (this.connectionState == '已连接') {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: commandCode == 3 || commandCode == 4 ? '确认下发指令' :\r\n\t\t\t\t\t\t\t'如原车钥匙不支持此功能请自行点击【更多钥匙功能】关闭',\r\n\t\t\t\t\t\tconfirmText: commandCode == 3 || commandCode == 4 ? '确认' : '确认支持',\r\n\t\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.btnCmdSend(commandCode, code);\r\n\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t\tthis.handleSendInfo(commandCode, code);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.connectionState == '未连接') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请等待蓝牙连接后重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 发送控制命令\r\n\t\t\thandleSendInfo(commandCode, code) {\r\n\t\t\t\tconst temp = {\r\n\t\t\t\t\tsn: this.deviceIDC,\r\n\t\t\t\t\tcontroltype: `${commandCode}${code}`,\r\n\t\t\t\t\telectricity: this?.parsedData?.electric || 0\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t// 认证加密算法 passwordSource 原始密码(6字节数组) random 随机数(6字节数组) returns 加密后的密码(8字节数\r\n\t\t\tauth_encrypt: function(passwordSource, random) {\r\n\t\t\t\tvar passwordEncrypt = [0, 0, 0, 0, 0, 0, 0, 0];\r\n\t\t\t\tfor (var i = 0; i < 6; i++) {\r\n\t\t\t\t\tpasswordEncrypt[i] = passwordSource[i] ^ random[i] ^ 255;\r\n\t\t\t\t}\r\n\t\t\t\treturn passwordEncrypt;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 发送控制命令 type 命令类型 data 命令数据\r\n\t\t\tbtnCmdSend: function(type, data) {\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tconst defaultData = [0, 0, 0, 0, 0, 0, 0, 0];\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase 16:\r\n\t\t\t\t\t\t// 认证命令\r\n\t\t\t\t\t\tconst orgKey = this.orgKey; // 原始密钥\r\n\t\t\t\t\t\tthat.PackAndSend(type, 8, that.auth_encrypt(orgKey, data));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3: // 开锁\r\n\t\t\t\t\tcase 4: // 锁车\r\n\t\t\t\t\tcase 5: // 尾箱\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\t// 寻车\r\n\t\t\t\t\t\tthat.PackAndSend(type, 8, defaultData);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 34:\r\n\t\t\t\t\t\t// 配对\r\n\t\t\t\t\t\tthat.PackAndSend(type, 8, data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\t//\r\n\t\t\t\t\t\tthat.PackAndSend07(type, 8, data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 58:\r\n\t\t\t\t\t\t// 设置 手动或感应模式\r\n\t\t\t\t\t\tconst flameoutData = data; // 第一个字节为0x01，后面补11个0x00\r\n\t\t\t\t\t\tthis.PackAndSend3a(type, 12, flameoutData); // 发送12字节数据\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 数据打包与发送\r\n\t\t\t * @param {number} type 数据类型\r\n\t\t\t * @param {number} len 数据长度\r\n\t\t\t * @param {Array} data 数据内容\r\n\t\t\t */\r\n\t\t\tPackAndSend: function(type, len, data) {\r\n\t\t\t\t// 数据包格式: 起始符(0x24) + 类型 + 长度 + 数据 + 结束符(0x24)\r\n\t\t\t\tvar packet = [36, type, len, ...data, 36];\r\n\t\t\t\tbleKeyManager.dispatcherSend2(this.arrayToArrayBuffer(packet));\r\n\t\t\t},\r\n\r\n\t\t\t// 打包并发送数据（支持动态数据体长度）\r\n\t\t\tPackAndSend3a(type, dataLength, data, sign) {\r\n\t\t\t\tconst header = [36]; // 数据头\r\n\t\t\t\tconst end = [36]; // 数据尾\r\n\t\t\t\t// 根据要求的数据长度填充数据，不足补0\r\n\t\t\t\tconst paddedData = [...data].concat(new Array(dataLength - data.length).fill(0)).slice(0, dataLength);\r\n\t\t\t\tconst packet = dataLength == 8 ? [...header, type, dataLength, ...data, ...end] : [...header, type, ...\r\n\t\t\t\t\tpaddedData, ...end\r\n\t\t\t\t]; // 组合数据包\r\n\t\t\t\tbleKeyManager.dispatcherSend2(this.arrayToArrayBuffer(packet)); // 发送数据\r\n\t\t\t},\r\n\r\n\t\t\t// 升窗降窗指令封装\r\n\t\t\tPackAndSend07: function(type, len, data) {\r\n\t\t\t\tconst defaultData = [0, 0, 0, 0, 0, 0, 0];\r\n\t\t\t\tvar packet = [36, type, len, data, ...defaultData, 36];\r\n\t\t\t\tbleKeyManager.dispatcherSend2(this.arrayToArrayBuffer(packet));\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 数组转ArrayBuffer\r\n\t\t\t * @param {Array} array 原始数组\r\n\t\t\t * @param {number} elementSize 元素大小(默认1字节)\r\n\t\t\t * @returns {ArrayBuffer} 转换后的缓冲区\r\n\t\t\t */\r\n\t\t\tarrayToArrayBuffer: function(array, elementSize = 1) {\r\n\t\t\t\tconst typedArray = new Uint8Array(array.length * elementSize);\r\n\t\t\t\tarray.forEach((value, index) => (typedArray[index * elementSize] = value));\r\n\t\t\t\treturn typedArray.buffer;\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\t// 转换电池剩余电量\r\n\t\t\tinitVoltage(dy) {\r\n\t\t\t\tconst thresholds = [4, 3.9, 3.8, 3.7, 3.6, 3.5, 3.4, 3.3, 3.2, 3.1];\r\n\t\t\t\tconst scores = [100, 90, 80, 70, 60, 50, 40, 30, 20, 10];\r\n\t\t\t\tconst index = thresholds.findIndex((threshold) => dy >= threshold);\r\n\t\t\t\treturn index !== -1 ? scores[index] : 0;\r\n\t\t\t},\r\n\r\n\t\t\t// 剩余电量显示图片\r\n\t\t\tgetBatteryImage(voltage) {\r\n\t\t\t\tconst levels = [{\r\n\t\t\t\t\t\tmin: 75,\r\n\t\t\t\t\t\tvalue: '100'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmin: 50,\r\n\t\t\t\t\t\tvalue: '75'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmin: 25,\r\n\t\t\t\t\t\tvalue: '50'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmin: 10,\r\n\t\t\t\t\t\tvalue: '25'\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\tconst level = levels.find((item) => voltage > item.min) || {\r\n\t\t\t\t\tvalue: '0'\r\n\t\t\t\t};\r\n\t\t\t\tthis.voltage_image = level.value\r\n\r\n\t\t\t},\r\n\r\n\t\t\t// 剩余电量处转换\r\n\t\t\tgetBatteryLevel(voltage) {\r\n\t\t\t\tthis.getBatteryImage(voltage);\r\n\t\t\t\tconst thresholds = [90, 80, 70, 60, 50, 40, 30, 20, 10, 5];\r\n\t\t\t\tconst values = ['100', '90', '80', '70', '60', '50', '40', '30', '20', '10'];\r\n\t\t\t\tconst index = thresholds.findIndex((threshold) => voltage > threshold);\r\n\t\t\t\treturn index !== -1 ? values[index] : '1';\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 解析16进制车辆状态数据\r\n\t\t\t * @param {string} hexString 30字符的16进制字符串\r\n\t\t\t * @returns {Array|null} 解析结果数组，格式为[{key: string, value: any}]\r\n\t\t\t */\r\n\t\t\tparseHexDataObject: function(hexString) {\r\n\t\t\t\t// 验证数据长度\r\n\t\t\t\tif (hexString.length !== 30) {\r\n\t\t\t\t\t// wx.showToast({ title: '数据长度不正确', icon: 'none' });\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 转换为字节数组\r\n\t\t\t\tconst bytes = [];\r\n\t\t\t\tfor (let i = 0; i < 30; i += 2) {\r\n\t\t\t\t\tbytes.push(parseInt(hexString.substr(i, 2), 16));\r\n\t\t\t\t}\r\n\t\t\t\tconst resultObject = {};\r\n\t\t\t\tresultObject.lock = bytes[2] === 1 ? true : false; //锁状态\r\n\t\t\t\tresultObject.voltage = (bytes[12] / 10).toFixed(1); //电池剩余电压计算\r\n\t\t\t\tresultObject.electric = this.getBatteryLevel(this.initVoltage((bytes[12] / 10).toFixed(\r\n\t\t\t\t\t1))); //电池剩余电量计算图片\r\n\t\t\t\tresultObject.supply = bytes[3];\r\n\t\t\t\tresultObject.induction = bytes[0] === 1 ? '感应模式' : '手动模式'; //执行模式\r\n\t\t\t\treturn resultObject;\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 数据解析按钮处理\r\n\t\t\t * @param {string} hexData 16进制数据字符串\r\n\t\t\t */\r\n\t\t\tparseData: function(hexData) {\r\n\t\t\t\tconst parsedResult = this.parseHexDataObject(hexData);\r\n\t\t\t\tif (parsedResult) {\r\n\t\t\t\t\tthis.parsedData = parsedResult\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * 修剪16进制数据\r\n\t\t\t * @param {string} hexString 原始16进制字符串\r\n\t\t\t * @returns {string} 修剪后的有效数据部分\r\n\t\t\t */\r\n\t\t\ttrimHexData: function(hexString) {\r\n\t\t\t\tif (typeof hexString !== 'string' || !/^[0-9a-fA-F]+$/.test(hexString)) {\r\n\t\t\t\t\tthrow new Error('无效的16进制字符串');\r\n\t\t\t\t}\r\n\t\t\t\treturn hexString.slice(4, -2); // 去除头尾固定字符\r\n\t\t\t},\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\tonSwiperChange(e) {\r\n\t\t\t\tthis.current = e.detail.current;\r\n\t\t\t},\r\n\t\t\t// 获取当前位置\r\n\t\t\tgetLocation() {\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\ttype: 'gcj02', // 返回国测局坐标（可用于腾讯地图、高德等）\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.latitude = res.latitude;\r\n\t\t\t\t\t\tthis.longitude = res.longitude;\r\n\t\t\t\t\t\tthis.markers[0].latitude = res.latitude;\r\n\t\t\t\t\t\tthis.markers[0].longitude = res.longitude;\r\n\t\t\t\t\t\tthis.markers[0].title = '当前位置';\r\n\t\t\t\t\t\tthis.markers[0].callout.content = '你在这里';\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tconsole.error('获取位置失败', err);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '定位失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonRegionChange(e) {\r\n\t\t\t\tconsole.log('地图区域变化', e);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 主容器 */\r\n\t.control_container {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20px;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 15px;\r\n\t\theight: 100vh;\r\n\t\tbackground: linear-gradient(to bottom, #E6F1F5, #F0F7F9);\r\n\t}\r\n\r\n\r\n\t/* 头部内容 */\r\n\t.control_title {\r\n\t\tdisplay: flex;\r\n\t\tgap: 5px;\r\n\t\tflex-direction: column;\r\n\t\t/* margin-top: 80px; */\r\n\t}\r\n\r\n\t.control_title .header {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.control_title .title {\r\n\t\tcolor: #333;\r\n\t\tfont-size: 24px;\r\n\t}\r\n\r\n\t.control_title .subtitle {\r\n\t\tcolor: #666;\r\n\t\tfont-size: 16px;\r\n\t}\r\n\r\n\t.control_title .location-divider {\r\n\t\tfont-size: 15px;\r\n\t}\r\n\r\n\t.control_title .icon {\r\n\t\twidth: 26px;\r\n\t\theight: 26px;\r\n\t}\r\n\r\n\t.control_title .icons-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tgap: 10px;\r\n\t}\r\n\r\n\r\n\t/* 地图内容 */\r\n\t.control_car_picture {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.control_car_picture .map {\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.control_car_picture .map_control {\r\n\t\tposition: absolute;\r\n\t\ttop: 10px;\r\n\t\tright: 10px;\r\n\t\tbackground-color: #fff;\r\n\t\twidth: 35px;\r\n\t\theight: 35px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tborder-radius: 50px;\r\n\t}\r\n\r\n\t.control_car_picture .map_image {\r\n\t\twidth: 26px;\r\n\t\theight: 26px;\r\n\t}\r\n\r\n\r\n\t/* 控制中心 */\r\n\t.control_quick-entry {\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 4px;\r\n\t}\r\n\r\n\t.entry-swiper {\r\n\t\theight: 200rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.entry-page {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding-left: 20rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.entry-item {\r\n\t\twidth: 23%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-right: 20rpx;\r\n\t\theight: 160rpx;\r\n\t}\r\n\r\n\t.entry-icon {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\t.entry-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #333;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.custom-indicator {\r\n\t\tposition: absolute;\r\n\t\tbottom: 4rpx;\r\n\t\tright: 10rpx;\r\n\t\tpadding: 3rpx 10rpx;\r\n\t\tbackground-color: rgba(0, 0, 0, .3);\r\n\t\tcolor: white;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t/* 信息中心 */\r\n\t.control_info-root {\r\n\t\tdisplay: flex;\r\n\t\theight: 150px;\r\n\t\tgap: 20px;\r\n\t\tfont-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\r\n\t}\r\n\r\n\t/* 左侧卡片 */\r\n\t.control_info-left-card {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #fff;\r\n\t\tposition: relative;\r\n\t\tbox-sizing: border-box;\r\n\t\tborder-radius: 8px;\r\n\t\tpadding: 20px;\r\n\t}\r\n\r\n\t/* 四个角的通用样式 */\r\n\t.control_info-corner {\r\n\t\tposition: absolute;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.control_info-top-left {\r\n\t\ttop: 20px;\r\n\t\tleft: 20px;\r\n\t}\r\n\r\n\t.control_info-top-right {\r\n\t\ttop: 20px;\r\n\t\tright: 20px;\r\n\t}\r\n\r\n\t.control_info-bottom-left {\r\n\t\tbottom: 20px;\r\n\t\tleft: 20px;\r\n\t}\r\n\r\n\t.control_info-bottom-right {\r\n\t\tbottom: 20px;\r\n\t\tright: 20px;\r\n\t}\r\n\r\n\t.control_info-date {\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #777;\r\n\t}\r\n\r\n\t.control_info-label {\r\n\t\tfont-size: 13px;\r\n\t\tcolor: #555;\r\n\t\tmargin-top: 4px;\r\n\t}\r\n\r\n\t.control_info-battery-value {\r\n\t\tfont-size: 15px;\r\n\t\tcolor: #555;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.control_info-battery-unit {\r\n\t\tfont-size: 11px;\r\n\t\tcolor: #777;\r\n\t}\r\n\r\n\t/* 右侧区域 */\r\n\t.control_info-right-container {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 10px;\r\n\t}\r\n\r\n\t.control_info-right-item {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 8px;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tgap: 15px;\r\n\t}\r\n\r\n\t.control_info-icon {\r\n\t\twidth: 30px;\r\n\t\theight: 30px;\r\n\t}\r\n\r\n\t.control_info-title {\r\n\t\tcolor: #444;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.control_info-status {\r\n\t\tcolor: #888;\r\n\t\tfont-size: 12px;\r\n\t\tmargin-top: 2px;\r\n\t}\r\n\r\n\t.control_car_text {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\r\n\t/* 解释权区域 */\r\n\t.control_footer {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\toverflow: hidden;\r\n\t\tpadding-bottom: calc(20px + env(safe-area-inset-bottom, 0px));\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.footer-content {\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t\tbackground-color: #fff;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.footer-item {\r\n\t\tcolor: #666;\r\n\t\tline-height: 1.2;\r\n\t}\r\n\r\n\t.footer-title {\r\n\t\tfont-size: 12px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333333;\r\n\t}\r\n\r\n\t.footer-info {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t}\r\n</style>","import MiniProgramPage from 'C:/Users/PC/Documents/GitHub/Genesis/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","info_screen","bleKeyManager"],"mappings":"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"}